<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carlos | Data Portfolio</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <style>
        :root {
            --bg-canvas: #ffffff;
            --accent-color: #1d1d1f;
            --creative-orange: #E09322;   /* Your Orange */
            --solid-orange: #E09322;      /* Vibrant Orange for shadows */
            --creative-pink: #FF3B30;    
            --text-main: #1d1d1f;
            --text-secondary: #6e6e73;
            --card-bg: #f8f9fa;
            --border-light: #e5e5e5;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-canvas);
            color: var(--text-main);
            margin: 0;
            line-height: 1.6;
        }

        header {
            padding: 80px 5% 40px 5%;
            border-bottom: 1px solid var(--border-light);
        }

        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 7vw, 4.5rem);
            margin: 15px 0;
            line-height: 1;
            text-transform: uppercase;
        }

        header .subtitle {
            font-size: 1rem;
            color: var(--creative-orange);
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* INTRODUCTION AREA */
        .intro-box {
            max-width: 1150px;
            margin: 40px auto;
            padding: 0 25px;
        }

        .intro-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
            border-left: 3px solid var(--creative-pink);
            padding-left: 20px;
            max-width: 800px;
            font-style: italic;
        }

        .links { margin-top: 25px; }
        .links a {
            color: var(--text-main);
            text-decoration: none;
            font-weight: 600;
            margin-right: 25px;
            border-bottom: 2px solid var(--creative-pink);
            transition: 0.3s;
        }
        .links a:hover { background: var(--creative-pink); color: white; }

        .container {
            max-width: 1150px;
            margin: 60px auto;
            padding: 0 25px;
        }

        section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
            margin-bottom: 120px;
            border-left: 1px solid var(--border-light);
            padding-left: 35px;
        }

        @media (min-width: 900px) {
            section { grid-template-columns: 320px 1fr; }
        }

        .chart-info h3 {
            font-size: 0.85rem;
            color: var(--creative-orange);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin: 0;
        }

        .chart-info h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            margin: 10px 0;
        }

        /* DATA SOURCE STYLE */
        .source {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 15px;
            font-family: 'Inter', sans-serif;
        }

        .source a {
            color: var(--creative-orange);
            text-decoration: none;
        }

        figure {
            margin: 0;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            width: fit-content; 
            max-width: 100%;
            border: 1px solid var(--border-light);
            /* VIBRANT ORANGE SHADOW: Changed opacity for less "paleness" */
            box-shadow: 10px 10px 0px var(--solid-orange); 
        }

        footer {
            background: var(--accent-color);
            color: #e5e5e5;
            padding: 60px 20px;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }
    </style>
</head>

<body>

    <header>
        <span class="subtitle">PP434 - Automated Data Visualisation for Policymaking</span>
        <h1>Coding Challenges<br>Portfolio tasks</h1>
        <span class="subtitle">Candidate number: 64689</span>
        <div class="links">
            <a href="https://www.linkedin.com/in/carlos-levi-gallegos-viza-806810172/">LinkedIn</a>
            <a href="https://github.com/CarlosGV1208">GitHub</a>
        </div>
    </header>

    <div class="intro-box">
        <p class="intro-text">
            This portfolio documents my work on coding challenges completed during the PP434 course, Automated Data Visualization for Policymaking, taught by Richard Davies at the School of Public Policy at the London School of Economics and Political Science.
        </p>
    </div>

    <div class="container">

        <section>
            <div class="chart-info">
                <h3>CC1 - HOSTING</h3> 
                <h2>Display charts in your own site.</h2> 
                <p>Setting up a personal website using GitHub and embedding existing charts into the live webpage.</p> 
            </div>
            <div class="graph-container">
                <figure id="Location1a"></figure>
                <p class="source">Source: <a href="https://rdeconomist.github.io/library">Prof. Richard Davies' Chart Library</a></p>
                <figure id="Location1b"></figure>
                <p class="source">Source: <a href="https://rdeconomist.github.io/library">Prof. Richard Davies' Chart Library</a></p>
            </div>
        </section>

        <section>
            <div class="chart-info">
                <h3>CC2 - BUILDING</h3>
                <h2>Create your own visualisations</h2>
                <p>Creating charts using the Economics Observatory Data Hub and embedding them into the website.</p>
            </div>
            <div class="graph-container">
                <figure id="Location2a"></figure>
                <p class="source">Source: <a href="https://www.economicsobservatory.com/explore">Economic Observatory Data Hub</a></p>
                <figure id="Location2b"></figure>
                <p class="source">Source: <a href="https://www.economicsobservatory.com/explore">Economic Observatory Data Hub</a></p>
            </div>
        </section>

        <section>
            <div class="chart-info">
                <h3>CC3 - DEBATE</h3>
                <h2>Use a visualisation in policy commentary</h2>
                <p>Producing charts linked to a policy topic and adding short written commentary alongside the visual evidence.</p>
            </div>
            <div class="graph-container">
                <figure id="Location3a"></figure>
                <p>The United Kingdom has one of the highest rates of youth unemployment among OECD countries, despite efforts to address this problem.</p>
                <p class="source">Source: <a href="https://www.oecd.org/en/data/indicators/youth-unemployment-rate.html">OECD Youth Unemployment Rate</a></p>
                <figure id="Location3b"></figure>
                <p>The gap has widened in the latest year between the male and female NEET rate at age 16-24. Since the pandemic male rates have been higher than females, changing the trend which historically saw higher rates for females.</p>
                <p class="source">Source: <a href="https://explore-education-statistics.service.gov.uk/find-statistics/neet-statistics-annual-brief/2024">Labor Force Survey 2024, GovUK</a></p>
            </div>
        </section>

        <section>
            <div class="chart-info">
                <h3>CC4 - REPLICATION</h3>
                <h2>Re-create, then improve, someone else's chart.</h2>
                <p>Replicating an existing chart from a public source and producing an improved version.</p>
            </div>
            <div class="graph-container">
                <figure id="Location4a">
                <img src="portfolio_cc/cc4_a.png" 
                alt="Original Chart Replication" 
                style="width: 80%; height: auto; display: block; margin: 0 auto;"> 
                </figure>
                <p class="source">Source: <a href="https://www.dw.com/en/anti-immigration-politics-contribute-to-racism-in-germany/a-74171014">DW Article: Anti-immigration politics contribute to racism in Germany</a></p>
                <figure id="Location4b"></figure>
                <p class="source">Source: <a href="https://www.dw.com/en/anti-immigration-politics-contribute-to-racism-in-germany/a-74171014">DW Article: Anti-immigration politics contribute to racism in Germany</a></p>
                <figure id="Location4c"></figure>
                <p class="source">Source: <a href="https://www.dw.com/en/anti-immigration-politics-contribute-to-racism-in-germany/a-74171014">DW Article: Anti-immigration politics contribute to racism in Germany</a></p>
            </div>
        </section>

        <section>
            <div class="chart-info">
                <h3>CC5 - ACCESING DATA</h3>
                <h2>Accesing data using an API</h2>
                <p>Collecting data through a live API and web scraping, cleaning the data, and visualising it on the website.</p>
            </div>
            <div class="graph-container">
                <figure id="Location5a"></figure>
                <div class="api-details" style="margin-top: 20px; font-size: 0.9em; color: #000000; line-height: 1.6;">
            <p>This chart uses data from the <strong>World Bank API</strong>.</p>
            <p>The base URL is: <br>
                <code>https://api.worldbank.org/v2/country/{countries}/indicator/{indicator}</code>
            </p>
            <p>To get the data, the API call specifies:</p>
            <ul style="margin-bottom: 15px;">
                <li>A list of countries: <code>ind; mex; arg; usa; aus</code></li>
                <li>The indicator code: <code>NY.GDP.TOTL.RT.ZS</code> (Total natural resources rents as a % of GDP)</li>
                <li>The output format: <code>format=json</code></li>
                <li>Observations per page: <code>per_page=1000</code></li>
            </ul>
            <p><strong>Full API request:</strong><br>
                <a href="https://api.worldbank.org/v2/country/ind;mex;arg;usa;aus/indicator/NY.GDP.TOTL.RT.ZS?format=json&per_page=1000" target="_blank" style="word-break: break-all; color: #002b7a;">
                    https://api.worldbank.org/v2/country/ind;mex;arg;usa;aus/indicator/NY.GDP.TOTL.RT.ZS?format=json&per_page=1000
                </a>
            </p>
            </div>
                <p class="source">Source: <a href="https://data.worldbank.org/indicator/NY.GDP.TOTL.RT.ZS">World Bank, Total Natural Resources Rents (% of GDP)</a></p>
            </div>
            <div class="chart-info">
                <h2>Accesing data vÃ­a scraping</h2>
                <p>I scraped a Wikipedia table containing education index data by country from 1990 to 2019, cleaned the dataset, selected relevant countries, and reshaped the data into tidy (long-form) format.</p>
            </div>
            <div class="graph-container">
                <figure id="Location5b"></figure>
                <p class="source">Source: <a href="https://en.wikipedia.org/wiki/Education_Index">Education Index, Wikipedia</a></p>
                <p class="source">Colab Notebook: <a href="https://drive.google.com/file/d/16_YknhAT5Q9eTrr61wOsRwuxL70LBtYW/view?usp=sharing">CC5. Scraping and cleaning data</a></p>
            </div>
        </section>


        <section>
            <div class="chart-info">
                <h3>CC6. LOOPS</h3>
                <h2>Build a dashboard</h2>
                <p>
                    Using JavaScript loops and Vega-Lite to automatically generate 
                    a small dashboard of related macroeconomic indicators.
                </p>
            </div>

            <!-- DASHBOARD CONTAINER -->
            <div class="graph-container">

                <!-- Dashboard grid -->
                <div id="charts">
                    <figure id="c1" class="chart"></figure>
                    <figure id="c2" class="chart"></figure>
                    <figure id="c3" class="chart"></figure>
                    <figure id="c4" class="chart"></figure>
                    <figure id="c5" class="chart"></figure>
                    <figure id="c6" class="chart"></figure>
                </div>

                <p class="source">
                    Source: 
                    <a href="https://data.worldbank.org/" target="_blank">
                        World Bank Open Data
                    </a>
                </p>

                <p class="source">
                    Colab Notebook:
                    <a href="https://colab.research.google.com/drive/1__1FMGNFxSc3shTlDCejlmNBjCS3egEg?usp=sharing" target="_blank">
                        CC6. Scraping and cleaning data
                    </a>
                </p>
            </div>
        </section>

        <!-- DASHBOARD GRID STYLES (3x2 layout)-->
        <style>
            #charts {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 24px;
                justify-items: center;
                align-items: center;
            }

            .chart {
                width: 100%;
            }
        </style>

        <!-- VEGA & VEGA-LITE LIBRARIES -->
        <script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

        <script>
            // BASE TEMPLATE FOR ALL CHARTS // 
            let templateSpec = {
                "$schema": "https://vega.github.io/schema/vega-lite/v6.json",

                "title": {
                    "text": "",
                    "anchor": "middle",
                    "fontSize": 14
                },

                "view": { "stroke": "transparent" },

                "data": {
                    "url": "",
                    "format": { "type": "json" }
                },

                "transform": [
                    { "calculate": "toNumber(datum.date)", "as": "year" }
                ],

                "width": 220,
                "height": 180,

                "mark": {
                    "type": "line",
                    "interpolate": "basis",
                    "color": "#58b3c7"
                },

                "encoding": {
                    "x": {
                        "field": "year",
                        "type": "quantitative",
                        "title": "Year",
                        "axis": {
                            "grid": false,
                            "format": "d"
                        }
                    },
                    "y": {
                        "field": "value",
                        "type": "quantitative",
                        "title": null,
                        "axis": {
                            "grid": false,
                            "format": "~s"   // ðŸ‘ˆ 1k, 1M, 1B
                        }
                    }
                }
            };

            // LIST OF DATA FILES //
            let chartFiles = [
                "wb_data_exports.json",
                "wb_data_gdp.json",
                "wb_data_imports.json",
                "wb_data_inflation.json",
                "wb_data_interest_rate.json",
                "wb_data_unemployment.json"
            ];

            // BASE URL WHERE JSON FILES ARE STORED // 
            let baseUrl = "https://raw.githubusercontent.com/CarlosGV1208/CarlosGV1208.github.io/refs/heads/main/portfolio_cc/cc6/";

            // LOOP: AUTOMATICALLY GENERATE ALL CHARTS //
            for (let i = 0; i < chartFiles.length; i++) {

                let spec = JSON.parse(JSON.stringify(templateSpec));

                spec.data.url = baseUrl + chartFiles[i];

                spec.title.text = chartFiles[i]
                    .replace("wb_data_", "")
                    .replace(".json", "")
                    .replace(/_/g, " ")
                    .toUpperCase();

                let chartDiv = document.getElementById(`c${i + 1}`);

                vegaEmbed(chartDiv, spec);
            }
        </script>

        <section>
            <div class="chart-info">
                <h3>CC7. MAPS</h3>
                <h2>Base maps and choropleths</h2>
                <p>Creating coordinate maps and choropleths for Scotland and Wales using geographic data.</p>
            </div>
            <div class="graph-container">
                <div class="graphs-stack">
                    <figure id="Location7a"></figure>
                <p>This choropleth map links business data from StatsWales to official ONS Local Authority District boundaries using LAD geographic identifiers, ensuring consistency between statistical and spatial units.</p>
                       <p class="source">Source: <a href="https://stats.gov.wales/en-GB/f2dc5994-cf29-4cb7-b692-360b87a85c71">Stats Wales, Business demography by area and year</a></p>
                    <figure id="Location7b"></figure>
                <p>Coordinate map showing drug-related deaths by council area in Scotland, using binned colors and sizes to highlight regional disparities and mortality intensity.</p>
                       <p class="source">Source: <a href="https://www.nrscotland.gov.uk/publications/drug-related-deaths-in-scotland-2024/#">National Records of Scotland, Drug-related deaths in Scotland, 2024</a></p>
                </div>
            </div>
        </section>

        <section>
            <div class="chart-info">
                <h3>CC8 - BIG DATA</h3> 
                <h2>Extracting a story from millions of prices.</h2> 
                <p>Working with large price datasets, reducing and aggregating the data, and visualising selected trends.</p> 
            </div>
            <div class="graph-container">
                <figure id="Location8a"></figure>
                <p class="source">Source: <a href="https://www.dropbox.com/scl/fo/phq41r2641wp2f454l2gs/AFIIt5xY_WCZeHF20r1r9sg?rlkey=eg1mulaydwbmdwixsefh7bnlb&e=1&dl=0">Long Run Prices Database (LRPD).</a></p>
                <figure id="Location8b"></figure>
                <p class="source">Source: <a href="https://www.dropbox.com/scl/fo/phq41r2641wp2f454l2gs/AFIIt5xY_WCZeHF20r1r9sg?rlkey=eg1mulaydwbmdwixsefh7bnlb&e=1&dl=0">Long Run Prices Database (LRPD).</a></p>
            </div>
        </section>


    </div>

    <footer>
        Created by Carlos Levi Gallegos Viza - LSE-MPA-DSPP 2025
    </footer>

    <script>
        const spec1a = "portfolio_cc/cc1_a.json";
        const spec1b = "portfolio_cc/cc1_b.json";
        const spec2a = "portfolio_cc/cc2_a.json";
        const spec2b = "portfolio_cc/cc2_b.json";
        const spec3a = "portfolio_cc/cc3_a.json";
        const spec3b = "portfolio_cc/cc3_b.json";
        const spec4b = "portfolio_cc/cc4_b.json";
        const spec4c = "portfolio_cc/cc4_c.json";
        const spec5a = "portfolio_cc/cc5_a.json";
        const spec5b = "portfolio_cc/cc5_b.json";
        const spec7a = "portfolio_cc/cc7/cc7_a.json";
        const spec7b = "portfolio_cc/cc7/cc7_b.json";
        const spec8a = "portfolio_cc/cc8/cc8_a.json";
        const spec8b = "portfolio_cc/cc8/cc8_b.json";


        vegaEmbed('#Location1a', spec1a);
        vegaEmbed('#Location1b', spec1b);
        vegaEmbed('#Location2a', spec2a);
        vegaEmbed('#Location2b', spec2b);
        vegaEmbed('#Location3a', spec3a);
        vegaEmbed('#Location3b', spec3b);
        vegaEmbed('#Location4b', spec4b);
        vegaEmbed('#Location4c', spec4c);
        vegaEmbed('#Location5a', spec5a);
        vegaEmbed('#Location5b', spec5b);
        vegaEmbed('#Location7a', spec7a);
        vegaEmbed('#Location7b', spec7b);
        vegaEmbed('#Location8a', spec8a);
        vegaEmbed('#Location8b', spec8b);

    </script>

</body>
</html>